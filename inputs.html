<template name="inputAutocomplete">
    <div class="autocomplete-wrapper">
        <input type="text" {{attributes}}>
        {{> autocompleteContainer}}
    </div>
</template>

<template name="textareaAutocomplete">
    <div class="autocomplete-wrapper">
        <textarea {{attributes}}>{{> UI.contentBlock}}</textarea>
        {{> autocompleteContainer}}
    </div>
</template>

<template name="_autocompleteContainer">
    {{#if isShowing}}
        {{#if index}}
            {{#EasySearch.Area index=index }}
            {{/EasySearch.Area}}
            <div class='-autocomplete-container'>
                {{#EasySearch.IfInputEmpty index=index}}
                    <!--nothing-->
                {{else}}
                    <ul class='-autocomplete-list'>
                        {{#with ..}}
                            {{#unless hide}}
                                {{#EasySearch.Each index=index }}
                                    {{#with ../..}}
                                        {{#if removeHolder}}
                                            {{#with currentTemplate }}
                                                {{#with ../..}}  {{! original 'data' context to itemTemplate}}
                                                    {{>  ..}}  {{! return value from itemTemplate }}
                                                {{/with}}
                                            {{/with}}
                                        {{else}}
                                            <li class="-autocomplete-item">
                                                {{#with currentTemplate }}
                                                    {{#with ../..}}  {{! original 'data' context to itemTemplate}}
                                                        {{>  ..}}  {{! return value from itemTemplate }}
                                                    {{/with}}
                                                {{/with}}
                                            </li>
                                        {{/if}}
                                    {{/with}}
                                {{/EasySearch.Each}}
                                {{#EasySearch.InfiniteScroll index=../index}}
                                    <i>Loading...</i>
                                {{/EasySearch.InfiniteScroll}}
                            {{/unless}}
                            {{>Template.dynamic template=template data=templateArgs}}
                        {{/with}}
                    </ul>
                {{/EasySearch.IfInputEmpty}}
                {{#EasySearch.IfNoResults index=index}}
                    {{#with .. }}
                        {{> noMatchTemplate }}
                    {{/with}}
                {{/EasySearch.IfNoResults}}
                {{#EasySearch.IfSearching index=index}}
                    <i>Loading...</i>
                {{/EasySearch.IfSearching}}

            </div>
        {{else}}
            <div class='-autocomplete-container'>
                {{#if isLoaded}}
                    {{#unless empty}}
                        <ul class='-autocomplete-list'>
                            {{#each filteredList}}
                                <li class="-autocomplete-item">
                                    {{#with ../currentTemplate }}
                                        {{#with ..}}  {{! original 'data' context to itemTemplate}}
                                            {{> ..}}  {{! return value from itemTemplate }}
                                        {{/with}}
                                    {{/with}}
                                </li>
                            {{/each}}
                        </ul>
                    {{else}}
                        {{> noMatchTemplate }}
                    {{/unless}}
                {{else}}
                    <i>loading...</i>
                {{/if}}
            </div>
        {{/if}}
    {{/if}}
</template>


<template name="_noMatch">
    (<i>no matches</i>)
</template>
